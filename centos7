yum install php php-openssl php-mysql php-curl httpd mariadb mariadb-server git expect

systemctl enable mariadb.service
systemctl start mariadb.service

curl -sS https://getcomposer.org/installer | php
mv composer.phar /usr/local/bin/composer

cd /var/www/html/ # assuming this is where we're storing stuff
git clone https://github.com/paypal/rest-api-sample-app-php.git

cd rest-api-sample-app-php
composer update

mysql_root_password=$(cat /dev/urandom | tr -d head -c${1:-16})
mysql_paypaluser_password=$(cat /dev/urandom | tr -d head -c${1:-16})

printf "mysql root password is: $mysql_root_password\n"
printf "mysql application user password is: $mysql_paypaluser_password\n"

./expect-centos7 "$mysql_root_password"

mysql -uroot -p"$mysql_root_password" -e "create database paypal_pizza_app;"

mysql -uroot -p"$mysql_root_password" -e "grant all privileges on paypal_pizza_app.* to paypal_user@localhost identified by '$mysql_paypaluser_password';"

mysql -uroot -p"$mysql_root_password" paypal_pizza_app < install/db.sql

firewall-cmd --zone=public --add-service=http --permanent
